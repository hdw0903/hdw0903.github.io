<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Symbol 프로퍼티 -ECMAScript - 한참치의 Study Blog</title><meta description="Symbol 오브젝트에 프로퍼티들을 살펴봅니다.이 프로퍼티들은 메서드로도 사용할 수 있습니다  Symbol 프로퍼티 Well-Known Symbol toStringTag 클래스의 메서드로 사용   isConcatSpreadable Array-like 오브젝트에서 사용   unscopable species 개념 species 다른 Class 반환 null 반"><meta property="og:type" content="blog"><meta property="og:title" content="Symbol 프로퍼티 -ECMAScript"><meta property="og:url" content="https://hdw0903.github.io/2020/04/06/Symbol%20%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%20-ECMAScript/"><meta property="og:site_name" content="한참치의 Study Blog"><meta property="og:description" content="Symbol 오브젝트에 프로퍼티들을 살펴봅니다.이 프로퍼티들은 메서드로도 사용할 수 있습니다  Symbol 프로퍼티 Well-Known Symbol toStringTag 클래스의 메서드로 사용   isConcatSpreadable Array-like 오브젝트에서 사용   unscopable species 개념 species 다른 Class 반환 null 반"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://hdw0903.github.io/2020/04/06/Symbol%20%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%20-ECMAScript/images/blog_logo.png"><meta property="article:published_time" content="2020-04-06T03:55:12.000Z"><meta property="article:modified_time" content="2020-04-25T09:57:08.469Z"><meta property="article:author" content="Han Dongwon"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="ECMAScript6"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="images/blog_logo.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hdw0903.github.io/2020/04/06/Symbol%20%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%20-ECMAScript/"},"headline":"한참치의 Study Blog","image":[],"datePublished":"2020-04-06T03:55:12.000Z","dateModified":"2020-04-25T09:57:08.469Z","author":{"@type":"Person","name":"Han Dongwon"},"description":"Symbol 오브젝트에 프로퍼티들을 살펴봅니다.이 프로퍼티들은 메서드로도 사용할 수 있습니다  Symbol 프로퍼티 Well-Known Symbol toStringTag 클래스의 메서드로 사용   isConcatSpreadable Array-like 오브젝트에서 사용   unscopable species 개념 species 다른 Class 반환 null 반"}</script><link rel="canonical" href="https://hdw0903.github.io/2020/04/06/Symbol%20%ED%94%84%EB%A1%9C%ED%8D%BC%ED%8B%B0%20-ECMAScript/"><link rel="icon" href="/images/coffee-favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/tomorrow-night-bright.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link href="https://fonts.googleapis.com/earlyaccess/jejugothic.css" rel="stylesheet"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-164181722-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-164181722-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-7899198893911275" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><link rel="alternate" href="/rss2.xml" title="한참치의 Study Blog" type="application/rss+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/template.png" alt="한참치의 Study Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub Home" href="https://github.com/hdw0903"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><span class="level-item">2020년 4월 6일 월요일 오후 12:55</span><span class="level-item"><a class="link-muted" href="/categories/ECMAScript6/">ECMAScript6</a></span><span class="level-item">한 시간 읽기 (대략 7171 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile">Symbol 프로퍼티 -ECMAScript</h1><div class="content"><p>Symbol 오브젝트에 프로퍼티들을 살펴봅니다.<br>이 프로퍼티들은 메서드로도 사용할 수 있습니다</p>
<ul>
<li>Symbol 프로퍼티<ul>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#Well-Known_Symbol">Well-Known Symbol</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#toStringTag">toStringTag</a><ul>
<li>클래스의 메서드로 사용</li>
</ul>
</li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#isConcatSpreadable">isConcatSpreadable</a><ul>
<li>Array-like 오브젝트에서 사용</li>
</ul>
</li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#unscopable">unscopable</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#species_개념">species 개념</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#species">species</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#return_other_Class">다른 Class 반환</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#return_null">null 반환</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#toPrimitive">toPrimitive</a><ul>
<li>toPrimitive() 파라미터의 세가지 모드(mode)</li>
</ul>
</li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#Symbol_iterator">이터레이터</a><ul>
<li>Array.prototype[Symbol.iterator]</li>
<li>String.prototype[Symbol.iterator]</li>
<li>Object 이터레이션</li>
</ul>
</li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#Symbol_generator">제너레이터</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#Symbol_asyncIterator">asyncIterator(): 비동기 반복</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#Symbol_match">match(): match 결과 반환</a></li>
<li><a href="/2020/04/06/Symbol%20프로퍼티%20-ECMAScript/#Symbol_matchAll">matchAll()</a></li>
</ul>
</li>
</ul>
<a id="more"></a>

<hr>
<h2 id="Well-Known_Symbol">Well-Known Symbol</h2>


<p>스펙에서 @@iterator 형태로 작성된 것을 볼 수 있으며<br>@@는 Symbol 대신 사용한 것입니다.<br>따라서 @@iterator는 Symbol.iterator와 같습니다.<br>@@iterator 형태는 스펙에서 사용하며 Symbol.iterator 형태는 내부 프로퍼티인<br>[[Description]]에 저장되는 형태입니다.<br>개발자 코드에서는 Symbol.iterator 형태를 사용합니다.</p>
<table>
<thead>
<tr>
<th>Spec name</th>
<th>[[Description]]</th>
</tr>
</thead>
<tbody><tr>
<td>@@asyncIterator</td>
<td>Symbol.asyncIterator</td>
</tr>
<tr>
<td>@@hasInstance</td>
<td>Symbol.hasInstance</td>
</tr>
<tr>
<td>@@isConcatSpreadable</td>
<td>Symbol.isConcatSpreadable</td>
</tr>
<tr>
<td>@@iterator</td>
<td>Symbol.iterator</td>
</tr>
<tr>
<td>@@match</td>
<td>Symbol.match</td>
</tr>
<tr>
<td>@@matchAll</td>
<td>Symbol.matchAll</td>
</tr>
<tr>
<td>참고용 프로퍼티</td>
<td>Symbol.prototype.description</td>
</tr>
<tr>
<td>@@replace</td>
<td>Symbol.replace</td>
</tr>
<tr>
<td>@@search</td>
<td>Symbol.search</td>
</tr>
<tr>
<td>@@species</td>
<td>Symbol.species</td>
</tr>
<tr>
<td>@@split</td>
<td>Symbol.split</td>
</tr>
<tr>
<td>@@toPrimitive</td>
<td>Symbol.toPrimitive</td>
</tr>
<tr>
<td>@@toStringTag</td>
<td>Symbol.toStringTag</td>
</tr>
<tr>
<td>@@unscopables</td>
<td>Symbol.unscopables</td>
</tr>
</tbody></table>
<ul>
<li><p>Well-Known Symbol은 스펙에서 처리 알고리즘(Algorism)을 구분하기 위해 부여한 이름입니다. 즉, 자바스크립트 엔진이 디폴트로 처리하는 알고리즘 유형 이름입니다.</p>
</li>
<li><p><mark>자바스크립트 프로그램에 같은 이름의 Well-Known.Symbol을 작성하면<br>엔진의 디폴트 처리를 실행하지 않고 프로그램에 작성한 코드를 실행합니다(오버라이딩)<br>Well-Known Symbol이 오버라이드되는 것과 같으므로 프로그램에 같은 이름을작성하여<br>Well-Known Symbol기능을 대체할 수 있습니다.</makr></p>
</li>
</ul>
<p><strong>이런 가변성과 유용성을 제공하는 것이 Well-Known Symbol의 목적입니다.</strong></p>
<hr>
<h2 id="toStringTag">toStringTag</h2>

<p>[object Object] 형태에서 Object를 Symbol.toStringTag 값으로 표시합니다.<br>객체의 기본 문자열 설명을 만드는 데 사용되는 문자열 값 속성입니다.<br><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/toString">Object.prototype.toString()</a> 메소드에 의해 내부적으로 액세스됩니다.</p>
<h3 id="설명"><a href="#설명" class="headerlink" title="설명"></a>설명</h3><p><strong>많은 자바스크립트 타입들은 기본적으로 tag를 가지고 있습니다.</strong></p>
<figure class="highlight js"><figcaption><span>tag default</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">'foo'</span>);     </span><br><span class="line"><span class="comment">// "[object String]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call([<span class="number">1</span>, <span class="number">2</span>]);    </span><br><span class="line"><span class="comment">// "[object Array]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="number">3</span>);         </span><br><span class="line"><span class="comment">// "[object Number]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>);      </span><br><span class="line"><span class="comment">// "[object Boolean]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>); </span><br><span class="line"><span class="comment">// "[object Undefined]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>);      </span><br><span class="line"><span class="comment">// "[object Null]"  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... and more</span></span><br></pre></td></tr></table></figure>

<p><strong>기본적으로 toStringTag symbol이 정의되어 있는 것도 있습니다.</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Map</span>());       </span><br><span class="line"><span class="comment">// "[object Map]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;&#125;); </span><br><span class="line"><span class="comment">// "[object GeneratorFunction]"  </span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">Promise</span>.resolve()); </span><br><span class="line"><span class="comment">// "[object Promise]" </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... and more</span></span><br></pre></td></tr></table></figure>

<p><strong>class를 생성하면 자바스크립트는 기본값으로 Object tag를 설정합니다.</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValidatorClass</span> </span>&#123;&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> ValidatorClass()); </span><br><span class="line"><span class="comment">// "[object Object]"</span></span><br></pre></td></tr></table></figure>

<p><strong>toStringTag를 이용하여 자신만의 맞춤 태그를 설정할 수 있습니다.</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValidatorClass</span> </span>&#123;  </span><br><span class="line"> <span class="keyword">get</span> [Symbol.toStringTag]() &#123;  </span><br><span class="line"> <span class="keyword">return</span> <span class="string">'Validator'</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> ValidatorClass()); </span><br><span class="line"><span class="comment">// "[object Validator]"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><figcaption><span>toStringTag 예제</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Sports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;  </span><br><span class="line"><span class="keyword">let</span> sportsObj = <span class="keyword">new</span> Sports;  </span><br><span class="line"><span class="number">1.</span> <span class="built_in">console</span>.log(sportsObj.toString());  </span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span> Sports.prototype[<span class="built_in">Symbol</span>.toStringTag] = <span class="string">"Sports-Function"</span>;  </span><br><span class="line"><span class="number">3.</span> <span class="built_in">console</span>.log(sportsObj.toString());  </span><br><span class="line"><span class="comment">// [object Object]  </span></span><br><span class="line"><span class="comment">// [object Sports-Function]</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>new Sports로 생성한 인스턴스로 toString()을 실행하면 [object Object]가 반환됩니다.<br>Object 오브젝트도 [object Object]를 반환하므로 구분이 어렵습니다.<br>한편 new Sports()의 파라미터 값이 없을때 new sports; 로 사용할 수 있습니다.</p>
</li>
<li><p>Sports.prototype[Symbol.toStringTag] = “Sports-Function”;<br>Sports.prototype[Symbol.toStringTag]에 [object Object] 의 Object에 표시할 문자열을 지정합니다.</p>
</li>
<li><p>sportsObj.toString()을 실행하면 엔진에서 디폴트 toStringTag 값을 반환하기 전에<br>sportsObj에서 Symbol.toStringTag의 작성 여부를 체크합니다.<br>값이 작성되어 있다면 디폴트 값이 아닌 작성된 값을 반환합니다.<br>따라서 [object Sports-Function] 이 출력됩니다.<br>[object Sports-Function]을 정규표현식으로 분리하면 Sports-Function을 구할 수 있습니다.</p>
</li>
</ol>
<h3 id="클래스의-메서드로-사용"><a href="#클래스의-메서드로-사용" class="headerlink" title="클래스의 메서드로 사용"></a>클래스의 메서드로 사용</h3><p>Symbol.toStringTag를 클래스의 getter로 작성할 수 있습니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;&#125;;  </span><br><span class="line"><span class="keyword">let</span> bookObj = <span class="keyword">new</span> Book();  </span><br><span class="line"><span class="number">1.</span> <span class="built_in">console</span>.log(bookObj.toString());  </span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span> <span class="class"><span class="keyword">class</span> <span class="title">Sports</span> </span>&#123;  </span><br><span class="line"> <span class="keyword">get</span> [Symbol.toStringTag]() &#123;  </span><br><span class="line"> <span class="keyword">return</span> <span class="string">"Sports-class"</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">3.</span> <span class="keyword">let</span> sportsObj = <span class="keyword">new</span> Sports();  </span><br><span class="line"><span class="built_in">console</span>.log(sportsObj.toString());  </span><br><span class="line">  </span><br><span class="line"><span class="number">4.</span> <span class="built_in">console</span>.log(<span class="built_in">Map</span>.prototype[<span class="built_in">Symbol</span>.toStringTag]);  </span><br><span class="line"><span class="comment">//[object Object]  </span></span><br><span class="line"><span class="comment">//[object Sports-class]  </span></span><br><span class="line"><span class="comment">//Map</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>toString()을 실행하면 [object Object]가 반환됩니다.<br>따라서 Function 오브젝트, Object 오브젝트와 구분할 수 없습니다.</p>
</li>
<li><p>클래스에 Symbol.toStringTag를 getter로 선언했습니다.<br>return 문에 [object Object]에서 Object에 표시될 문자열을 작성했습니다.Sports-class가 반환됩니다.<br>getter로 작성하지 않고 메서드로 작성하면 [object Object]가 반환되므로 getter로 작성해야 합니다.</p>
</li>
<li><p>인스턴스로 toString()을 호출하면 sportsObj 인스턴스에 작성된 getSymbol.toStringTag가 호출됩니다.<br>호출된 메서드에서 “Sports-class”를 반환하므로 [object Sports-class]가 출력됩니다.</p>
</li>
<li><p>Map 같이 Symbol.toStringTag를 기본값(빌트인)으로 가지고 있는 것들이 있습니다.<br>Map.prototype[Symbol.toStringTag]를 실행하면 “Map”이 출력됩니다.<br>개발자 코드로 Symbol.toStringTag에 표시될 문자열을 작성하거나 getter를 사용하지 않아도 됩니다.</p>
</li>
</ol>
<hr>
<h2 id="isConcatSpreadable">isConcatSpreadable</h2>

<p>Symbol.isConcatSpreadable는<br><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/concat">Array.prototype.concat()</a> 메서드를 사용할 때 객체를 배열 요소에 병합해야하는지 구성하는 데 사용됩니다.</p>
<blockquote>
<p>[Symbol.isConcatSpreadable] = true / false</p>
</blockquote>
<ul>
<li>프로퍼티의 기본값은 true 입니다.<br>false로 설정시 배열을 펼처서 합치지 않고 배열의 끝에 배열을 추가합니다.<br>사용시 true/false 에 따라 생성되는 배열의 length값이 달라집니다.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">let</span> one = [<span class="number">11</span>, <span class="number">12</span>], two = [<span class="number">21</span>, <span class="number">22</span>];  </span><br><span class="line"><span class="keyword">let</span> result = one.concat(two);  </span><br><span class="line"><span class="built_in">console</span>.log(result, result.length);  </span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">Array(4)  </span></span><br><span class="line"><span class="comment"> 0: 11  </span></span><br><span class="line"><span class="comment"> 1: 12  </span></span><br><span class="line"><span class="comment"> 2: 21  </span></span><br><span class="line"><span class="comment"> 3: 22  </span></span><br><span class="line"><span class="comment"> length: 4  </span></span><br><span class="line"><span class="comment"> __proto__: Array(0)  </span></span><br><span class="line"><span class="comment">4   </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span> two[<span class="built_in">Symbol</span>.isConcatSpreadable] = <span class="literal">false</span>;  </span><br><span class="line">result = one.concat(two);  </span><br><span class="line"><span class="built_in">console</span>.log(result, result.length);  </span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">Array(3)  </span></span><br><span class="line"><span class="comment"> 0: 11  </span></span><br><span class="line"><span class="comment"> 1: 12  </span></span><br><span class="line"><span class="comment"> 2: Array(2)  </span></span><br><span class="line"><span class="comment"> 0: 21  </span></span><br><span class="line"><span class="comment"> 1: 22  </span></span><br><span class="line"><span class="comment"> length: 2  </span></span><br><span class="line"><span class="comment"> Symbol(Symbol.isConcatSpreadable): true  </span></span><br><span class="line"><span class="comment"> __proto__: Array(0)  </span></span><br><span class="line"><span class="comment"> length: 3  </span></span><br><span class="line"><span class="comment"> __proto__: Array(0)  </span></span><br><span class="line"><span class="comment">3  </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line">  </span><br><span class="line"><span class="number">3.</span> two[<span class="built_in">Symbol</span>.isConcatSpreadable] = <span class="literal">true</span>;  </span><br><span class="line">result = one.concat(two);  </span><br><span class="line"><span class="built_in">console</span>.log(result, result.length);  </span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">Array(4)  </span></span><br><span class="line"><span class="comment"> 0: 11  </span></span><br><span class="line"><span class="comment"> 1: 12  </span></span><br><span class="line"><span class="comment"> 2: 21  </span></span><br><span class="line"><span class="comment"> 3: 22  </span></span><br><span class="line"><span class="comment"> length: 4  </span></span><br><span class="line"><span class="comment"> __proto__: Array(0)  </span></span><br><span class="line"><span class="comment">4  </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>one 배열의 [11, 12]에 concat()의 파라미터에 지정한 two 배열 [21, 22]를 결합하면,<br>21 과 22가 각각 분리되어 one 배열 끝에 추가됩니다.<br>[11, 12, 21, 22] length: 4 가 반환됩니다.<br>Array.prototype에 [Symbol.isConcatSpreadable]을 작성하지 않았으므로 디폴트 true값 입니다.<br>일반적인 concat()메서드 사용입니다.</p>
</li>
<li><p>two[Symbol.isConcatSpreadable]에 false 값을 할당했습니다.<br>concat() 메서드로 one 배열과 two 배열을 결합하면 two 배열의 [21, 22]를 분리하지 않고<br>배열 자체를 첨부합니다. [11, 12, Array[2]] 형태로 결합되어 length 값은 3을 갖습니다.<br>개발자 도구에서 Array[2]를 살펴보면 [21, 22] length: 2 가 할당되어 있고<br>Symbol(Symbol.isConcatSpreadable): true로 isConcatSpreadable = false 가 적용된 것을 볼 수 있습니다. 기본값 isConcatSpreadable = true 인 경우 프로퍼티에 나타나지 않습니다.</p>
</li>
<li><p>two[Symbol.isConcatSpreadable]에 true를 할당하였으며 디폴트 값 true와 같습니다.<br>one 배열에 two 배열의 [21, 22]가 분리되어 끝에 첨부됩니다.<br>[11, 12, 21, 22] 형태가 됩니다.</p>
</li>
</ol>
<h3 id="Array-like-오브젝트에서-사용"><a href="#Array-like-오브젝트에서-사용" class="headerlink" title="Array-like 오브젝트에서 사용"></a>Array-like 오브젝트에서 사용</h3><p><mark>유사 배열(Array-like) 오브젝트도 concat()을 사용할 수 있습니다. 하지만 유사 배열 오브젝트는 isConcatSpreadable = true 값을 가지지 않습니다.</mark> concat()으로 배열을 하나씩 분리하여 추가 병합하고 싶다면 isConcatSpreadable를 사용하여 true로 설정해줍니다.</p>
<figure class="highlight js"><figcaption><span>isConcatSpreadable > Array-like</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> one = [<span class="number">11</span>, <span class="number">12</span>];  </span><br><span class="line"><span class="number">1.</span> <span class="keyword">let</span> fiveSix = &#123;  </span><br><span class="line"> <span class="number">0</span>: <span class="string">"five"</span>,  </span><br><span class="line"> <span class="number">1</span>: <span class="string">"six"</span>,  </span><br><span class="line"> length: <span class="number">2</span>  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="keyword">let</span> result = one.concat(fiveSix);  </span><br><span class="line"><span class="built_in">console</span>.log(result, result.length);  </span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">Array(3)  </span></span><br><span class="line"><span class="comment"> 0: 11  </span></span><br><span class="line"><span class="comment"> 1: 12  </span></span><br><span class="line"><span class="comment"> 2: Object&#123;  </span></span><br><span class="line"><span class="comment"> 0: "five",   </span></span><br><span class="line"><span class="comment"> 1: "six",   </span></span><br><span class="line"><span class="comment"> length: 2&#125;   </span></span><br><span class="line"><span class="comment"> length: 3  </span></span><br><span class="line"><span class="comment"> __proto__: Array(0)  </span></span><br><span class="line"><span class="comment">3  </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span> <span class="keyword">let</span> arrayLike = &#123;  </span><br><span class="line"> [<span class="built_in">Symbol</span>.isConcatSpreadable]: <span class="literal">true</span>,  </span><br><span class="line"> <span class="number">0</span>: <span class="string">"five"</span>,  </span><br><span class="line"> <span class="number">1</span>: <span class="string">"six"</span>,  </span><br><span class="line"> length: <span class="number">2</span>  </span><br><span class="line">&#125;;  </span><br><span class="line">result = one.concat(arrayLike);  </span><br><span class="line"><span class="built_in">console</span>.log(result, result.length);  </span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">Array(4)  </span></span><br><span class="line"><span class="comment"> 0: 11  </span></span><br><span class="line"><span class="comment"> 1: 12  </span></span><br><span class="line"><span class="comment"> 2: "five"  </span></span><br><span class="line"><span class="comment"> 3: "six"  </span></span><br><span class="line"><span class="comment"> length: 4  </span></span><br><span class="line"><span class="comment"> __proto__: Array(0)  </span></span><br><span class="line"><span class="comment">4  </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>one은 배열 [11, 12]이고 fiveSix는 Array-like {0: “five”, 1” “six”, length:2}입니다.<br>이 상태에서 concat()을 실행하면 [11, 12, Object] 형태가 됩니다.<br>오브젝트 형태가 분리되어 첨부되지 않습니다.</p>
</li>
<li><p>Array-like 오브젝트에 [Symbol.isConcatSpreadable]: true를 작성하여,<br>concat()을 실행하면 Array-like 오브젝트의 각 프로퍼티를 분리하여 배열 끝에 첨부합니다.</p>
</li>
</ol>
<hr>
<h2 id="unscopable">unscopable</h2>

<p><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/with">with</a>문에서 사용하며 값이 true 이면 프로퍼티를 전개 하지 않습니다.</p>
<blockquote>
<p>[Symbol.unscopables] = true/false</p>
</blockquote>
<p>Symbol.unscopables 값이 true일 때, with 문에서 프로퍼티를 전개하지 않으므로<br>Object 오브젝트의 프로퍼티 키를 사용하면 에러가 발생합니다.</p>
<p>ES5 에서 “use strict” 범위에 with 문을 사용하면 에러가 발생합니다.ES6도 마찬가지 입니다. ES6에서 stirct모드는 보편적인 환경이므로 Symbol.unscopables를 사용할 빈도가 그다지 높지 않습니다.</p>
<figure class="highlight js"><figcaption><span>Symbol.unscopables</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// "use strict" 를 선언하면 with 에서 에러 발생  </span></span><br><span class="line"><span class="keyword">let</span> sports = &#123;  </span><br><span class="line"> soccer: <span class="string">"축구"</span>,  </span><br><span class="line"> baseball: <span class="string">"야구"</span>  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">1.</span> <span class="keyword">with</span>(sports)&#123;  </span><br><span class="line"> <span class="built_in">console</span>.log(soccer, baseball);  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span> sports[<span class="built_in">Symbol</span>.unscopables] = &#123;  </span><br><span class="line"> baseball: <span class="literal">true</span>  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">try</span> &#123;  </span><br><span class="line"> <span class="number">3.</span> <span class="keyword">with</span> (sports) &#123;  </span><br><span class="line"> <span class="built_in">console</span>.log(soccer);  </span><br><span class="line"> <span class="keyword">let</span> value = baseball;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;  </span><br><span class="line"> <span class="built_in">console</span>.log(e.message);  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="comment">// 축구 야구  </span></span><br><span class="line"><span class="comment">// 축구  </span></span><br><span class="line"><span class="comment">// baseball is not defined</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>with 문을 실행하면 파라미터에 작성한 sports 오브젝트의 프로퍼티가 펼쳐진(spread)형태가 됩니다.<br>따라서 프로퍼티 값을 구할 때 sports[“soccer”]형태로 작성하지 않고 soccer만 작성합니다.<br>soccer의 프로퍼티 값인 “축구”가 반환되고 baseball의 프로퍼티 값도 마찬가지로 반환되어<br>“축구” “야구”가 출력됩니다.</p>
</li>
<li><p>with(sports)를 실행할 때 sports 오브젝트에서 전개하지 않을 프로퍼티를 작성합니다.<br>baseball: true를 설정해줬으므로 with 문에서 baseball 프로퍼티가 전개되지 않습니다.<br>그러므로 soccer의 프로퍼티 값인 “축구”만 출력됩니다.</p>
</li>
<li><p>with(sports) 문에서 baseball 프로퍼티가 전개되지 않으므로 baseball을 변수에 할당하면<br>에러가 발생합니다.</p>
</li>
</ol>
<hr>
<h2 id="species_개념">species 개념</h2>

<p>Symbol.species는 constructor를 반환합니다.<br>constructor를 반환한다는 것은 constructor로 인스턴스를 생성하여 반환하는 것과 같습니다.<br>Symbol.species를 오버라이드 할 수 있으며, 개발자 코드로 반환되는 인스턴스를 변경할 수 있습니다.</p>
<p>species의 개념을 살펴 봅니다.</p>
<figure class="highlight js"><figcaption><span>species 개념</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">let</span> arrayObj = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];  </span><br><span class="line"><span class="number">2.</span> <span class="keyword">let</span> sliceOne = arrayObj.slice(<span class="number">1</span>, <span class="number">3</span>);  </span><br><span class="line"><span class="number">3.</span> <span class="keyword">let</span> sliceTwo = sliceOne.slice(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li><p>let arrayObj = [1, 2, 3]을 실행하면 Array 오브젝트(인스턴스)를 생성하고 엘리먼트 값으로<br>1, 2, 3을 설정합니다. 아래는 [1, 2, 3]이 할당된 arrayObj 인스턴스 구조입니다.</p>
<img src="/images/speciesArrayObj.JPG">    

<p>arrayObj 구성을 보면 prototype이 없으며 &#95;&#95;proto&#95;&#95;만 있습니다.<br>&#95;&#95;proto&#95;&#95;에는 Array 오브젝트의 prototype에 연결된 프로퍼티가 첨부되어 있습니다.<br>Array의 오브젝트 프로퍼티가 연결되어 있지만 arrayObj에는 연결된 프로퍼티가 없습니다.<br>따라서 arrayObj는 Array 오브젝트가 아닌 Array 인스턴스입니다.</p>
</li>
</ol>
<ol start="2">
<li>arrayObj.slice(1, 3) 코드는 자바스크립트에서 일반적으로 사용하는 [1, 2, 3].slice(1, 3)형태와 다릅니다.[1, 2, 3]으로 Array 인스턴스를 생성하여 arrayObj에 할당하고, arrayObj에 있는 slice()를 호출하는 형태 입니다. 실행하면 [1, 2, 3]에서 2와 3이 반환되어 sliceOne 변수에 할당될 것으로 생각할 수 있습니다.<br>하지만, sliceOne변수에 할당되는 것은 Array 인스턴스 입니다. 2 와 3이 인스턴스 값으로 설정됩니다.<br>arrayObj 와 sliceOne 둘다 Array 오브젝트 인스턴스 입니다. 배열의 엘리먼트 값이 달라집니다.</li>
</ol>
<p><strong>여기서 중요한 점은 Array 인스턴스(arrayObj)의 slice()를 호출하면 slice()실행 결과가 반영된</strong><br><strong>Array 인스턴스가 반환된다는 점입니다. Array 인스턴스가 반환되므로 sliceOne 인스턴스를 지정하여 slice()를 호출할 수 있습니다.</strong></p>
<ol start="3">
<li>sliceOne 인스턴스를 지정하여 slice()를 호출하고 마찬가지로 Array 인스턴스가 반환됩니다.<br>Symbol.species를 이해하려면 먼저 이에 대한 이해가 필요합니다.</li>
</ol>
<hr>
<h2 id="species">species</h2>

<p>Symbol.species는 constructor를 반환합니다.</p>
<p>Symbol.species는 static 액세서 프로퍼티로 getter만 있고 setter는 없습니다.<br>Array, Map, Set, Promise, RegExp, ArrayBuffer, TypedArray 오브젝트에 Symbol.species가 빌트인으로 포함되어 있습니다.</p>
<p>위에 거론된 빌트인 오브젝트를 상속받는 클래스에 Symbol.species를 작성하면, 빌트인 오브젝트의 Symbol.species가 오버라이드됩니다. 이를 통해 클래스의 Symbol.species에서 다른 오브젝트를 반환할 수 있습니다.</p>
<ul>
<li>예를 들어 인스턴스의 slice()를 호출하면 slice()를 호출한 인스턴스를 반환하지만, 클래스에 Symbol.species를 작성하여 인스턴스가 아닌 Array 오브젝트를 반환할 수 있습니다. <strong>(인스턴스 대신 인스턴스의 부모 오브젝트 반환)</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;  </span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">get</span> [Symbol.species]() &#123;  </span><br><span class="line"> <span class="keyword">return</span> <span class="built_in">Array</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">2.</span> <span class="keyword">let</span> oneInstance = <span class="keyword">new</span> ExtendArray(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="number">3.</span> <span class="keyword">let</span> twoInstance = oneInstance.slice(<span class="number">1</span>, <span class="number">2</span>);  </span><br><span class="line"><span class="number">4.</span> <span class="built_in">console</span>.log(oneInstance <span class="keyword">instanceof</span> ExtendArray);  </span><br><span class="line">  </span><br><span class="line"><span class="number">5.</span> <span class="built_in">console</span>.log(twoInstance <span class="keyword">instanceof</span> <span class="built_in">Array</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="number">6.</span> <span class="built_in">console</span>.log(twoInstance <span class="keyword">instanceof</span> ExtendArray);  </span><br><span class="line"><span class="comment">//true  </span></span><br><span class="line"><span class="comment">//true  </span></span><br><span class="line"><span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p><a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/instanceof">instanceof 연산자</a>는 생성자의 프로토 타입 속성이 객체의 프로토 타입 체인에 나타나는지 테스트하여 true/false값을 반환합니다.</p>
<ol>
<li><p>ExtendArray 클래스에서 Array 오브젝트를 상속받습니다. 클래스에 static 메서드이면서 getter를 사용하여 Symbol.species를 작성하였습니다. Array 오브젝트의 Symbol.species가 오버라이드 됩니다.<br>인스턴스의 Array 오브젝트 메서드를 호출하면 오버라이드된 Symbol.species가 호출됩니다.<br>그리고 return Array;를 하므로 메서드를 호출한 인스턴스가 반환되지 않고 Array 인스턴스가 반환됩니다.</p>
<ul>
<li>return Array가 Array 오브젝트의 constructor를 반환하지만, return 문은 오른쪽의 표현식을 평가하고 평가 결과를 반환하므로 Array 오브젝트의 constructor를 호출하고 그 결과인 Array 인스턴스를 반환합니다.</li>
</ul>
</li>
<li><p>new 연산자로 ExtendArray()룰 호출하면서 파라미터로 1, 2, 3을 넘겨줬습니다.<br>ExtendArray 클래스에서 Array 오브젝트를 상속받았으므로 생성한 인스턴스는 Array 오브젝트 특성을 갖습니다.</p>
</li>
<li><p>oneInstance 인스턴스에 상속받은 Array 오브젝트가 존재하므로 slice()를 호출할 수 있습니다.<br>slice()가 호출되면 ExtendArray 클래스에 getter로 작성된 Symbol.species()가 호출되며,<br>oneInstance가 반환되지 않고 Array 인스턴스를 생성하여 반환합니다.</p>
</li>
<li><p>new ExtendArray(1, 2, 3)으로 생성한 인스턴스를 oneInstance에 할당했으므로 true가 출력됩니다.</p>
</li>
<li><p>oneInstance.sliceOne(1, 2)를 실행하면 클래스에 작성한 Symbol.species()가 호출됩니다.<br>return Array로 생성한 인스턴스를 twoInstance에 할당했으므로 true가 출력됩니다.</p>
</li>
<li><p>new ExtendArray()로 생성한 인스턴스를 twoInstance에 할당한 것이 아니라, Array 오브젝트로 생성한 인스턴스(oneInstance)를 할당했으므로 false가 출력됩니다.<br>이처럼 Symbol.species로 반환되는 인스턴스를 변경할 수 있습니다.</p>
</li>
</ol>
<hr>
<h2 id="return_other_Class">다른 Class 반환</h2>

<p>위 에서 return 문에서 상속받은 Array 오브젝트를 반환하는 형태를 살펴봤습니다.<br>여기서는 다른 클래스를 반환하는 형태를 살펴봅니다.</p>
<figure class="highlight js"><figcaption><span>other-Class</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendOne</span> <span class="keyword">extends</span> <span class="title">Array</span></span>&#123;  </span><br><span class="line"> showOne()&#123;  </span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"ExtendOne"</span>);  </span><br><span class="line">    </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">2.</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendTwo</span> <span class="keyword">extends</span> <span class="title">Array</span></span>&#123;  </span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">get</span> [Symbol.species]() &#123;  </span><br><span class="line"> <span class="keyword">return</span> ExtendOne;  </span><br><span class="line"> &#125;  </span><br><span class="line"> showTwo()&#123;  </span><br><span class="line"> <span class="built_in">console</span>.log(<span class="string">"ExtendTwo"</span>);  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">3.</span> <span class="keyword">let</span> twoInst = <span class="keyword">new</span> ExtendTwo(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);  </span><br><span class="line"><span class="keyword">let</span> threeInst = twoInst.filter(<span class="function"><span class="params">value</span> =&gt;</span> value &gt; <span class="number">10</span>);  </span><br><span class="line"><span class="built_in">console</span>.log(threeInst);  </span><br><span class="line">  </span><br><span class="line"><span class="number">4.</span> threeInst.showOne();  </span><br><span class="line"><span class="built_in">console</span>.log(threeInst.showTwo);  </span><br><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">ExtendOne(2)  </span></span><br><span class="line"><span class="comment"> 0: 20  </span></span><br><span class="line"><span class="comment"> 1: 30  </span></span><br><span class="line"><span class="comment"> length: 2  </span></span><br><span class="line"><span class="comment"> __proto__: Array  </span></span><br><span class="line"><span class="comment">*/</span>  </span><br><span class="line"><span class="comment">// ExtendOne  </span></span><br><span class="line"><span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>ExtendOne 클래스에서 Array 오브젝트를 상속받습니다.<br>이 클래스를 아래에 작성한 2. ExtendTwo 클래스의 [Symbol.species]에서 반환합니다.</p>
</li>
<li><p>[Symbol.species] ( )에서 ExtendOne을 return 하므로 클래스를 반환하는 것처럼 보입니다만,<br>클래스의 constructor를 반환하므로 인스턴스로 생성하여 반환하게 됩니다.<br>이와 같이 [Symbol.species] ( )를 호출한 인스턴스가 아닌 다른 인스턴스로 반환할 수 있습니다.</p>
</li>
<li><p>twoInst.filter()가 호출되면, 우선 twoInst 인스턴스를 생성한 ExtendTwo 클래스에서 [Symbol.species] 작성 여부를 체크합니다. 존재하면 클래스의 [Symbol.species] ()를 호출하고 존재하지 않으면 상속받은 Array 오브젝트의 [Symbol.species] ()를 호출합니다.</p>
</li>
<li><p>호출된 [Symbol.species] ()에서 ExtendOne 인스턴스를 반환하여 ExtendTwo 클래스에서 Array 오브젝트를 상속받았으므로 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">filter()</a> 메서드를 호출할 수 있습니다.<br>ExtendOne 클래스에서 filter() 메서드를 지원하지 않는 오브젝트를 상속받으면 Error가 발생합니다.</p>
</li>
</ol>
<p>filter() 실행 결과 twoInst에 설정하지 않고 반환할 인스턴스에 할당합니다. 즉 threeInst 인스턴스에 할당됩니다. 따라서 twoInst 인스턴스 값 [10, 20, 30]이고 threeInst 인스턴스 값은 [20, 30]입니다.</p>
<ol start="5">
<li>return ExtendOne으로 인해 ExtendOne 인스턴스가 threeInst에 설정되므로,<br>threeInst 인스턴스의 showOne()을 호출할 수 있습니다. showTwo는 존재하지 않으므로 undefined가 출력됩니다.</li>
</ol>
<hr>
<h2 id="return_null">null 반환</h2>

<p>[Symbol.species] ()에서 null을 반환하면 디폴트[Symbol.species] ()가 호출됩니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExtendOne</span> <span class="keyword">extends</span> <span class="title">Array</span></span>&#123;  </span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">get</span> [Symbol.species]() &#123;  </span><br><span class="line"> <span class="keyword">return</span> <span class="literal">null</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">1.</span> <span class="keyword">let</span> oneInst = <span class="keyword">new</span> ExtendOne(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);  </span><br><span class="line"><span class="keyword">let</span> arrayInst = oneInst.filter(<span class="function"><span class="params">value</span> =&gt;</span> value &gt; <span class="number">10</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span> <span class="built_in">console</span>.log(arrayInst <span class="keyword">instanceof</span> <span class="built_in">Array</span>);  </span><br><span class="line"><span class="number">3.</span> <span class="built_in">console</span>.log(arrayInst <span class="keyword">instanceof</span> ExtendOne);  </span><br><span class="line"><span class="comment">// true  </span></span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>oneInst.filter()를 호출하면 ExtendOne 클래스의 [Symbol.species] ()가 호출되며 null를 반환합니다.<br>null이 반환되면 디폴트 [Symbol.species] ()가 호출됩니다.<br>ExtendOne 클래스에 작성하지 않았지만 상속받은 Array 오브젝트에 있으므로 [Symbol.species] ()가 호출되며<br>Array 인스턴스를 생성하여 반환합니다. 따라서 filter()를 실행할 수 있습니다.</p>
</li>
<li><p>oneInst.filter()를 실행하면 [Symbol.species] ()에서 Array 인스턴스를 반환하여 arrayInst에 할당하므로 true값이 출력됩니다.</p>
</li>
<li><p>[Symbol.species] ()에서 Array 인스턴스를 반환하므로 arrayInst는 ExtendOne 클래스의 인스턴스가 아닙니다.<br>false</p>
</li>
</ol>
<hr>
<h2 id="toPrimitive">toPrimitive</h2>

<p>오브젝트를 프리미티브(원시값) 타입으로 변환합니다.</p>
<p>자바스크립트의 프리미티브 값은 number, string, boolean, undefined, null 그리고 symbol입니다.<br>+연산자는 앞뒤의 값 타입에 따라 값을 더하거나 연결합니다. (1+2)는 3이되지만 (1+”2”)는 12가 됩니다.<br>반면 곱하기(*), 나누기(/), 빼기(-)는 연산만 하고 연결은 하지 않습니다.</p>
<p><mark>연산 대상이 Number 타입이 아닐 경우 엔진의 ToPrimitive 모듈을 기준으로 값을 변환합니다. 예를 들어, 숫자에 true를 더하면 1로 변환하여 더하고, 문자열에 true를 더하면 “true”로 변환하여 연결합니다. 이때 Symbol.toPrimitive()로 ToPrimitive를 오버라이드하여 엔진의 변환 기준을 변경할 수 있습니다.</mark>(엔진의 디폴트 변환 값을 개발자 코드로 변경)</p>
<h3 id="세-가지-모드"><a href="#세-가지-모드" class="headerlink" title="세 가지 모드"></a>세 가지 모드</h3><p>Symbol.toPrimitive() 에서 값을 변환하는 기준은 이를 호출하는 형태에 따라 결정됩니다.</p>
<p>엔진은 호출한 곳의 형태에 따라 Symbol.toPrimitive(hint) 파라미터에 세 가지 모드(Mode)를 설정합니다.<br><del>개발자가 작성하는 것이 아니라 엔진이 다음 기준으로 설정하는 것입니다.</del></p>
<ol>
<li><p>Number 환경이면 “number”를 toPrimitive(hint) 파라미터에 설정합니다.</p>
</li>
<li><p>String 환경이면 “string”을 toPrimitive(hint) 파라미터에 설정합니다.</p>
</li>
<li><p>Number 와 String 환경이 아니면 toPrimitive(hint) 파라미터에 “default”를 설정합니다.</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;  </span><br><span class="line"> [<span class="built_in">Symbol</span>.toPrimitive](hint)&#123;  </span><br><span class="line"> <span class="keyword">if</span> (hint === <span class="string">"number"</span>)&#123;  </span><br><span class="line"> <span class="keyword">return</span> <span class="number">30</span>;  </span><br><span class="line"> &#125;;  </span><br><span class="line"> <span class="keyword">if</span> (hint === <span class="string">"string"</span>)&#123;  </span><br><span class="line"> <span class="keyword">return</span> <span class="string">"문자열"</span>;  </span><br><span class="line"> &#125;;  </span><br><span class="line"> <span class="keyword">return</span> <span class="string">"디폴트"</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">1.</span> <span class="built_in">console</span>.log(<span class="string">"1:"</span>, <span class="number">20</span> + obj); <span class="comment">// 1: 20디폴트  </span></span><br><span class="line"><span class="number">2.</span> <span class="built_in">console</span>.log(<span class="string">"2:"</span>, <span class="number">20</span> * obj); <span class="comment">// 2: 600  </span></span><br><span class="line">  </span><br><span class="line"><span class="number">3.</span> <span class="built_in">console</span>.log(<span class="string">"3:"</span>, obj + <span class="number">50</span>); <span class="comment">// 3: 디폴트50  </span></span><br><span class="line"><span class="number">4.</span> <span class="built_in">console</span>.log(<span class="string">"4:"</span>, +obj + <span class="number">50</span>);<span class="comment">// 4: 80  </span></span><br><span class="line"><span class="number">5.</span> <span class="built_in">console</span>.log(<span class="string">"5:"</span>, <span class="string">`<span class="subst">$&#123;obj&#125;</span>`</span> + <span class="number">123</span>); <span class="comment">// 5: 문자열123</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>(20 + obj)와 같이 오브젝트가 연산 대상이면, 자동으로 obj 오브젝트의 [Symbol.toPrimitive] ()가 호출됩니다. 파라미터에 “default”가 설정됩니다. 함수에서 “디폴트”를 반환하여 문자열을 연결하는 형태가 되어 “20디폴트”가 출력됩니다.</p>
</li>
<li><p>곱하기(*)를 사용하였으므로 파라미터에 “number”가 설정됩니다. 함수에서 30을 반환하며 20을곱해 600이 출력됩니다.</p>
</li>
<li><p>(20 + obj)에서 파라미터에 “default”가 설정되듯이 마찬가지로 “default”가 설정됩니다.<br>함수에서 “디폴트”를 반환하여 50을 연결하므로 “디폴트50”이 출력됩니다.</p>
</li>
<li><p>+obj 에서 +는 단항+연산자로 피연산자를 Number 타입으로 변환합니다.<br>함수에서 30을 반환하며 50을더해 80이 출력됩니다.</p>
</li>
<li><p>템플릿을 사용한 형태로 파라미터에 “string”이 설정됩니다. 함수에서 “문자열”을 반환하여<br>${obj}가 “문자열”로 변환됩니다. 123을 연결하여 “문자열123”이 출력됩니다.</p>
</li>
</ol>
<hr>
<h2 id="Symbol_iterator">이터레이터</h2>

<p>Symbol.iterator()는 이터레이터 오브젝트를 생성하여 반환합니다.</p>
<p>Symbol.iterator는 String, Array, Map, Set, TypedArray 오브젝트의 prototype에 연결되어 있습니다.<br>오브젝트의 [Symbol.iterator]를 호출하면 이터레이터 오브젝트를 생성하여 반환합니다.</p>
<p>Object 오브젝트에는 Symbol.iterator가 없습니다만, 개발자 코드로 구현할 수 있습니다.</p>
<h3 id="Array-prototype-Symbol-iterator"><a href="#Array-prototype-Symbol-iterator" class="headerlink" title="Array.prototype[Symbol.iterator]"></a>Array.prototype[Symbol.iterator]</h3><p>배열 처리를 위한 이터레이터 오브젝트를 생성하여 반환합니다. 배열 엘리먼트를 하나씩 처리할 수 있습니다.</p>
<figure class="highlight js"><figcaption><span>iterator-Array</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numberArray = [<span class="number">10</span>, <span class="number">20</span>];  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> numberArray)&#123;  </span><br><span class="line"> <span class="built_in">console</span>.log(value);  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="keyword">let</span> iteratorObj = numberArray[<span class="built_in">Symbol</span>.iterator]();  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());  </span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());  </span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());  </span><br><span class="line"><span class="comment">//10  </span></span><br><span class="line"><span class="comment">//20  </span></span><br><span class="line"><span class="comment">/*Object  </span></span><br><span class="line"><span class="comment"> value: 10  </span></span><br><span class="line"><span class="comment"> done: false  </span></span><br><span class="line"><span class="comment"> __proto__: Object*/</span>  </span><br><span class="line"><span class="comment">/*Object  </span></span><br><span class="line"><span class="comment"> value: 20  </span></span><br><span class="line"><span class="comment"> done: false  </span></span><br><span class="line"><span class="comment"> __proto__: Object*/</span>  </span><br><span class="line"><span class="comment">/*Object  </span></span><br><span class="line"><span class="comment"> value: undefined  </span></span><br><span class="line"><span class="comment"> done: true  </span></span><br><span class="line"><span class="comment"> __proto__: Object*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>numberArray는 Array 오브젝트 인스턴스 구조입니다.<br>Symbol.iterator()를 호출할 수 있습니다.</p>
</li>
<li><p>numberArray[Symbol.iterator] ()는 numberArray 인스턴스의 Symbol.iterator()를 호출하는 것으로 이터레이터 오브젝트를 생성하여 반환합니다. 이터레이터 오브젝트를 사용하여 배열 엘리먼트를 하나씩 처리할 수 있습니다.</p>
</li>
<li><p>next()를 호출할 때마다 배열 엘리먼트 값을 {value: 10, done:false} 형태로 반환합니다.</p>
</li>
</ul>
<h3 id="String-prototype-Symbol-iterator"><a href="#String-prototype-Symbol-iterator" class="headerlink" title="String.prototype[Symbol.iterator]"></a>String.prototype[Symbol.iterator]</h3><p>문자열 처리를 위한 이터레이터 오브젝트를 반환합니다.</p>
<p>문자열을 문자 단위로 하나씩 처리할 수 있습니다.</p>
<figure class="highlight js"><figcaption><span>iterator-string</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stringValue = <span class="string">"1A"</span>;  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> stringValue) &#123;  </span><br><span class="line"> <span class="built_in">console</span>.log(value);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">let</span> iterObj = stringValue[<span class="built_in">Symbol</span>.iterator]();  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">console</span>.log(iterObj.next());  </span><br><span class="line"><span class="built_in">console</span>.log(iterObj.next());  </span><br><span class="line"><span class="built_in">console</span>.log(iterObj.next());  </span><br><span class="line"><span class="comment">// 1  </span></span><br><span class="line"><span class="comment">// A  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment">// Object &#123;value: "1", done: false&#125;  </span></span><br><span class="line"><span class="comment">// Object &#123;value: "A", done: false&#125;  </span></span><br><span class="line"><span class="comment">// Object &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>“1A”를 1과 A로 분리하여 for-of문을 실행합니다. 문자 단위로 반복할 수 있는 것은<br>String.prototype에 Symbol.iterator가 있기 때문입니다.<br>for-of문에서 stringValue를 String 오브젝트로 생성하고 그 안에 Symbol.iterator()를 사용합니다.</p>
</li>
<li><p>stringValue[Symbol.iterator] ();형태로 호출하면 이터레이터 오브젝트를 반환합니다.<br>이터레이터 오브젝트를 사용하여 문자열을 문자 단위로 하나씩 처리할 수 있습니다.</p>
</li>
<li><p>next()를 호출할 때마다 문자열의 문자를 value 프로퍼티에 설정하고 {value: “1”, done: false}형태로 반환합니다.</p>
</li>
</ul>
<h3 id="Object-이터레이션"><a href="#Object-이터레이션" class="headerlink" title="Object 이터레이션"></a>Object 이터레이션</h3><p>Object 오브젝트에는 기본적으로 Symbol.iterator를 갖고 있지 않습니다. (for-of 등 반복처리불가.)</p>
<p><mark>Object 오브젝트에 Symbol.iterator를 작성하면 반복 처리를 할 수 있습니다.</mark></p>
<figure class="highlight js"><figcaption><span>iterator-Object</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">let</span> obj = &#123;  </span><br><span class="line"> [<span class="built_in">Symbol</span>.iterator]()&#123;  </span><br><span class="line">    <span class="number">2.</span> <span class="keyword">return</span> &#123;  </span><br><span class="line">        maxCount: <span class="number">2</span>,  </span><br><span class="line">        count: <span class="number">0</span>,  </span><br><span class="line">        next()&#123;   </span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.count &lt; <span class="keyword">this</span>.maxCount)&#123;  </span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">value</span>: <span class="keyword">this</span>.count++, <span class="attr">done</span>: <span class="literal">false</span>&#125;;  </span><br><span class="line">            &#125;  </span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span>&#125;;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line"><span class="number">3.</span> <span class="keyword">let</span> iteratorObj = obj[<span class="built_in">Symbol</span>.iterator]();  </span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());  </span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());  </span><br><span class="line"><span class="built_in">console</span>.log(iteratorObj.next());</span><br></pre></td></tr></table></figure>

<ol>
<li><p>Object 오브젝트를 반복처리 하기 위해서 [Symbol.iterator] ()를 obj prototype에 작성해줬습니다.</p>
</li>
<li><p>호출된 obj[Symbol.iterator] ()의 return으로 반환된 오브젝트를 iteratorObj에 할당합니다.</p>
</li>
<li><p>iteratorObj에 next()가 있으므로 iteratorObj.next() 형태로 호출할 수 있습니다.</p>
</li>
</ol>
<hr>
<h2 id="Symbol_generator">제너레이터</h2>

<p>Object 오브젝트에 Symbol.iterator를 제너레이터 함수로 작성하면, 이터레이터로 반복할 때 마다 yield를 수행합니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> obj[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>*(<span class="params"></span>)</span>&#123;  </span><br><span class="line"> <span class="keyword">yield</span> <span class="number">10</span>;  </span><br><span class="line"> <span class="keyword">yield</span> <span class="number">20</span>;  </span><br><span class="line"> <span class="keyword">yield</span> <span class="number">30</span>;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="number">2.</span> <span class="keyword">let</span> result = [...obj];  </span><br><span class="line"><span class="built_in">console</span>.log(result);  </span><br><span class="line"><span class="comment">//[10, 20, 30]</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>obj 오브젝트의 [Symbol.iterator]를 제너레이터 함수로 작성하였습니다.<br>이터레이터로 반복할 때 마다 yield 표현식을 평가하여 값을 반환합니다.</p>
</li>
<li><p>대괄호 [] 안에 spread 연산자로 obj 오브젝트를 작성했습니다. […obj]를 시작하면<br>엔진에서 obj에 [Symbol.iterator] 작성 여부를 체크합니다. 작성되있으므로<br>[Symbol.iterator] ()가 호출되며 이터레이터 오브젝트를 생성하여 반환합니다.<br>이터레이터가 반복될 때마다 yield에서 반환한 값을 배열에 첨부합니다.<br>반복이 끝나면 생성된 배열을 반환합니다.</p>
</li>
</ol>
<hr>
<h2 id="Symbol_asyncIterator">asyncIterator(): 비동기 반복</h2>

<p>Symbol.asyncIterator는 오브젝트의 asyncIterator 기본 값을 지정합니다.<br>asyncIterator 프로퍼티가 오브젝트에 설정되면 await for of 루프(loop)에서 비동기 반복할 수 있습니다.</p>
<p>오브젝트가 비동기 반복이 가능하려면 Symbol.asyncIterator 프로퍼티 키가 존재해야합니다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myAsyncIterable = &#123;  </span><br><span class="line">    <span class="keyword">async</span>* [<span class="built_in">Symbol</span>.asyncIterator]() &#123;  </span><br><span class="line">        <span class="keyword">yield</span> <span class="string">"hello"</span>;  </span><br><span class="line">        <span class="keyword">yield</span> <span class="string">"async"</span>;  </span><br><span class="line">        <span class="keyword">yield</span> <span class="string">"iteration!"</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line">  </span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;  </span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> x <span class="keyword">of</span> myAsyncIterable) &#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(x);  </span><br><span class="line">        <span class="comment">// "hello"  </span></span><br><span class="line">        <span class="comment">// "async"  </span></span><br><span class="line">        <span class="comment">// "iteration!"  </span></span><br><span class="line"> &#125;  </span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ul>
<li>오브젝트의 [Symbol.asyncIterator] 속성을 설정해줌으로써 비동기 이터러블을 커스텀하여 정의할 수 있습니다.</li>
</ul>
<p><mark>현재 기본적으로 [Symbol.asyncIterator] 프로퍼티가 built-in 되어 있는 JavaScript 오브젝트는 없습니다.</mark></p>
<p>하지만 WHATWG(Web Hypertext Application Technology Working Group, WHATWG)에서는<br>최근에 [Symbol.asyncIterator]가 스펙에 기준에 도달함으로써 비동기 반복이 가능한 첫 번째 built-in 오브젝트로 설정되었습니다.</p>
<p><a href="https://ko.wikipedia.org/wiki/WHATWG">WHATWG 위키</a><br><a href="https://whatwg.org/">WHATWG 공식홈페이지</a></p>
<hr>
<h2 id="Symbol_match">match(): match 결과 반환</h2>

<p>String 오브젝트에서 정규 표현식을 사용할 수 있는 메서드<br>match(), replace(), search(), split() 에 대응하는</p>
<p>Symbol 오브젝트 Symbol.match(), Symbol.replace(), Symbol.search(), Symbol.split()이 있습니다.</p>
<ul>
<li>String.prototype.match()가 호출되면 먼저 오브젝트에서 Symbol.match 작성 여부를 체크합니다.<br>작성돼있다면 오브젝트의 Symbol.match()를 호출합니다. String.prototype.match()는 호출되지 않습니다.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="built_in">console</span>.log(<span class="string">"1"</span>, <span class="string">"Sports"</span>.match(<span class="regexp">/s/</span>));  </span><br><span class="line"><span class="comment">// 1: [0: "5", index: 5, input: "Sports"]  </span></span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MatchCheck</span> </span>&#123;  </span><br><span class="line"> <span class="keyword">constructor</span>(base) &#123;  </span><br><span class="line"> <span class="keyword">this</span>.base = base;  </span><br><span class="line"> &#125;  </span><br><span class="line"> <span class="number">2.</span> [<span class="built_in">Symbol</span>.match](target) &#123;  </span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">this</span>.base.indexOf(target) &gt;= <span class="number">0</span>;  </span><br><span class="line"> &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="number">3.</span> <span class="keyword">let</span> instMatch = <span class="keyword">new</span> MatchCheck(<span class="string">"sports"</span>);  </span><br><span class="line"><span class="number">4.</span> <span class="built_in">console</span>.log(<span class="string">"2:"</span>, <span class="string">"po"</span>.match(instMatch));  </span><br><span class="line"><span class="comment">// 2: true</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>“Sports”에 패턴/s/를 매치하면 매치 결과를 배열로 반환합니다. “Sports”가 문자열이므로<br>엔진이 String.prototype에 연결된 프로퍼티로 String 인스턴스를 생성합니다.<br>생성한 인스턴스에 “Sports”를 설정한 후 match()를 호출하면서 /s/를 파라미터로 넘겨줍니다.</p>
</li>
<li><p>Symbol.match()의 target 파라미터에 설정된 문자열이 this.base에 포함되어 있으면 true를 반환하고, 아니면 false를 반환합니다.</p>
</li>
<li><p>new MatchCheck(“sports”);를 실행하면 constructor가 호출되고 파라미터로 넘겨 준 “sports”가 this.base에 설정됩니다.</p>
</li>
<li><p>“po”.match(instMatch)가 호출되면 파라미터에 작성한 instMatch 인스턴스에서 Symbol.match의 작성 여부를 체크합니다. 존재하므로 Symbol.match(target)을 호출하면서 “po”를 파라미터 값으로 넘겨줍니다.<br>Symbol.match()에서 “sports” 와 “po”로 match를 행하며, “po”가 있으므로 true를 반환합니다.</p>
</li>
</ol>
<h2 id="Symbol_matchAll">matchAll()</h2>

<p>Symbol.matchAll 은 String 오브젝트를 정규표현식으로 평가하여<br>반환결과를 이터레이터 오브젝트로 반환합니다.</p>
<p>Symbol.matchAll은 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll">String.prototype.matchAll()</a>메서드에 의해 호출 됩니다.</p>
<p>+참고 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/@@matchAll">RegExp.prototype[@@matchAll] ( )</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> re = <span class="regexp">/[0-9]+/g</span>;  </span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'2016-01-02|2019-03-07'</span>;  </span><br><span class="line"><span class="keyword">let</span> result = re[<span class="built_in">Symbol</span>.matchAll](str);  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.from(result, x =&gt; x[<span class="number">0</span>]));  </span><br><span class="line"><span class="comment">// expected output: Array ["2016", "01", "02", "2019", "03", "07"]</span></span><br></pre></td></tr></table></figure></div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/JavaScript/">JavaScript</a><a class="link-muted mr-2" rel="tag" href="/tags/ECMAScript6/">ECMAScript6</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/04/09/Symbol%20%EB%A9%94%EC%84%9C%EB%93%9C%20-ECMAScript/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Symbol 메서드 -ECMAScript</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/04/06/Symbol%20%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8%20-ECMAScript/"><span class="level-item">Symbol 오브젝트 -ECMAScript</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="/images/blog_logo.png" alt="Han Dongwon"></figure><p class="title is-size-4 is-block line-height-inherit">Han Dongwon</p><p class="is-size-6 is-block">한 동원참치</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Seoul / South Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">50</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">4</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/hdw0903" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hdw0903"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">링크</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://github.com/hdw0903" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Core-JavaScript/"><span class="level-start"><span class="level-item">Core JavaScript</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/ECMAScript6/"><span class="level-start"><span class="level-item">ECMAScript6</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/jQuery/"><span class="level-start"><span class="level-item">jQuery</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-05T08:57:53.000Z">2020-05-05</time></p><p class="title is-6"><a class="link-muted" href="/2020/05/05/prototype-Core-JavaScript/">prototype -Core JavaScript</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Core-JavaScript/">Core JavaScript</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-05-03T06:56:17.000Z">2020-05-03</time></p><p class="title is-6"><a class="link-muted" href="/2020/05/03/%ED%81%B4%EB%A1%9C%EC%A0%80-Core-JavaScript/">클로저 -Core JavaScript</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Core-JavaScript/">Core JavaScript</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-30T11:03:50.000Z">2020-04-30</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/30/%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98-Core-JavaScript/">콜백 함수 -Core JavaScript</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Core-JavaScript/">Core JavaScript</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-27T12:50:04.000Z">2020-04-27</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/27/this-Core-JavaScript/">this -Core JavaScript</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Core-JavaScript/">Core JavaScript</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-26T08:50:25.000Z">2020-04-26</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/26/%EC%8B%A4%ED%96%89-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-Core-JavaScript/">실행 컨텍스트 -Core JavaScript</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Core-JavaScript/">Core JavaScript</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">5월 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">4월 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">3월 2020</span></span><span class="level-end"><span class="level-item tag">31</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">2월 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Core-JavaScript/"><span class="tag">Core JavaScript</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECMAScript6/"><span class="tag">ECMAScript6</span><span class="tag is-grey-lightest">23</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag is-grey-lightest">50</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jQuery/"><span class="tag">jQuery</span><span class="tag is-grey-lightest">4</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/template.png" alt="한참치의 Study Blog" height="28"></a><p class="size-small"><span>&copy; 2020 Han Dongwon</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://hdw0903.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(Untitled)","posts":"포스트","pages":"Pages","categories":"카테고리","tags":"태그"});
        });</script></body></html>